# redis.conf - managed by Ansible
# See https://redis.io/docs/management/config/

# Network
bind {{ redis_bind_address }}
port {{ redis_port }}
protected-mode yes

# Authentication
requirepass {{ redis_password }}

# General
daemonize no
supervised systemd
loglevel notice
logfile /var/log/redis/redis-server.log

# Persistence - RDB snapshots
save 3600 1
save 300 100
save 60 10000
dbfilename dump.rdb
dir /var/lib/redis

# Persistence - AOF
appendonly yes
appendfilename "appendonly.aof"
appendfsync everysec
no-appendfsync-on-rewrite no
auto-aof-rewrite-percentage 100
auto-aof-rewrite-min-size 64mb

# Memory management
maxmemory {{ redis_maxmemory }}
maxmemory-policy {{ redis_maxmemory_policy }}

# Limits
tcp-backlog 511
timeout 0
tcp-keepalive 300
maxclients 10000
